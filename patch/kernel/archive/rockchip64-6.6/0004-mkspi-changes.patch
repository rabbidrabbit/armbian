From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: John Doe <john.doe@somewhere.on.planet>
Date: Thu, 5 Sep 2024 14:32:35 +0000
Subject: Patching kernel rockchip64 files
 arch/arm64/boot/dts/rockchip/rk3328-mkspi.dts

Signed-off-by: John Doe <john.doe@somewhere.on.planet>
---
 arch/arm64/boot/dts/rockchip/rk3328-mkspi.dts | 37 +++-------
 1 file changed, 11 insertions(+), 26 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3328-mkspi.dts b/arch/arm64/boot/dts/rockchip/rk3328-mkspi.dts
index efcdbba96..597399f43 100755
--- a/arch/arm64/boot/dts/rockchip/rk3328-mkspi.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3328-mkspi.dts
@@ -18,36 +18,10 @@ aliases {
 
 	chosen {
 		stdout-path = "serial2:1500000n8";
 	};
 
-	/delete-node/ dmc-opp-table;
-	dmc_opp_table: dmc-opp-table {
-		compatible = "operating-points-v2";
-
-		opp-786000000 {
-			opp-hz = /bits/ 64 <786000000>;
-			opp-microvolt = <1075000 1075000 12000000>;
-		};
-		opp-798000000 {
-			opp-hz = /bits/ 64 <798000000>;
-			opp-microvolt = <1075000 1075000 12000000>;
-		};
-		opp-840000000 {
-			opp-hz = /bits/ 64 <840000000>;
-			opp-microvolt = <1075000 1075000 12000000>;
-		};
-		opp-924000000 {
-			opp-hz = /bits/ 64 <924000000>;
-			opp-microvolt = <1100000 1100000 12000000>;
-		};
-		opp-1068000000 {
-			opp-hz = /bits/ 64 <1068000000>;
-			opp-microvolt = <1175000 1175000 12000000>;
-		};
-	};
-
 	gmac_clkin: external-gmac-clock {
 		compatible = "fixed-clock";
 		clock-frequency = <125000000>;
 		clock-output-names = "gmac_clkin";
 		#clock-cells = <0>;
@@ -75,10 +49,12 @@ vcc_sdio: sdmmcio-regulator {
 		regulator-name = "vcc_sdio";
 		regulator-type = "voltage";
 		regulator-min-microvolt = <1800000>;
 		regulator-max-microvolt = <3300000>;
 		regulator-always-on;
+		regulator-settling-time-us = <5000>;
+		startup-delay-us = <2000>;
 		vin-supply = <&vcc_io>;
 	};
 
 	vcc_host1_5v: vcc_otg_5v: vcc-host1-5v-regulator {
 		compatible = "regulator-fixed";
@@ -134,10 +110,13 @@ &analog_sound {
 &codec {
 	status = "disabled";
 };
 
 &gmac2phy {
+	assigned-clocks = <&cru SCLK_MAC2PHY>;
+	assigned-clock-parents = <&cru SCLK_MAC2PHY_SRC>;
+	assigned-clock-rate = <50000000>;
  	status = "okay";
  };
 
 &dfi {
 	status = "okay";
@@ -398,10 +377,11 @@ &spdif_out {
 &spdif_sound {
  	status = "okay";
 };
 
 &tsadc {
+	
 	status = "okay";
 };
 
 &u2phy {
 	status = "okay";
@@ -451,5 +431,10 @@ &vop {
 };
 
 &vop_mmu {
 	status = "okay";
 };
+
+&memory {
+	device_type = "memory";
+	reg = <0x00 0x200000 0x00 0x3fe00000>;
+};
-- 
Created with Armbian build tools https://github.com/armbian/build

